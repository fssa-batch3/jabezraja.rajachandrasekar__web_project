<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Shopping Site</title>
    <link rel="icon" href="../../assets/images/logo.jpg" type="image/x-icon">
    <link href="../../assets/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
</head>
<header id="hed"></header>

<body class="body">
    <div class="headpic">
        <img src="../../assets/images/banner/cart.png" alt="header img">
    </div>
    <div class="head1">Cart</div>
    <div class="head2">YOUR ITEMS</div>
    <main>
        <div class="content">
            <div class="cont_tab">
                <table class="product-table">
                    <tr>
                        <th>ITEMS</th>
                        <th>DESCRIPTION</th>
                        <th>PRICE</th>
                        <th>QTY</th>
                        <th>SUBTOTAL</th>
                        <th>
                            <i class="fa-sharp fa-solid fa-trash" style="color: #886619;"></i>
                        </th>
                    </tr>
                    <!-- <tr id="carit">
                            <td class="trex">
                            <img src="../../assets/images/products/img (32).jpg" width="150px" height="130px" alt="White-T-Shirt">
                            </td>
                            <td class="trex">
                            <p>Navy Blue Kurta</p>
                            <p>Color: Navy Blue</p>
                            <p>Size: L</p>
                            </td>          
                            <td class="trex">
                            <p>&#8377 1,777.00</p>
                            </td>
                            <td class="trex">
                            <input type="number" 
                            placeholder="2">               
                            </td>
                            <td class="trex">
                            <p>&#8377 3,554.00</p>
                            </td>
                            <td>
                            <p class="fa-sm">
                            <i class="fa-solid fa-xmark fa-sm" style="color: #900c19;"></i>
                            </p>
                            </td>
                            </tr> -->
                </table>

            </div>
            <!-- <div class="rightside"> -->
                <!-- <h4>ORDER SUMMARY</h4>
                <table class="details">
                    <caption></caption>
                    <th scope="col"></th>
                    <tr>
                        <td>SUBTOTAL</td>
                        <td class="rf" id="subtotal1"></td>
                    </tr>
                    <tr>
                        <td>SHIPPING</td>
                        <td class="rf">Free</td>
                    </tr>
                    <tr>
                        <td>SECURE PACK</td>
                        <td class="rf">&#8377 17.00</td>
                    </tr>
                    <tr>
                        <td>DISCOUNT</td>
                        <td class="rf">&#8377 -554.00</td>
                    </tr>
                    <tr>
                        <td>ORDER TOTAL</td>
                        <td class="rf">&#8377 3,017.00</td>
                    </tr>
                </table>
                <div id="inc">Inclusive of all taxes
                </div>
                <button class="cbtn">
                    <a href="./checkout.html">CHECKOUT</a>
                </button> -->
            <!-- </div> -->
        </div>
    </main>
    <script src="/js/header.js"> </script>

    <script>
        const cart = JSON.parse(localStorage.getItem("cart_details"));
        const pro_data = JSON.parse(localStorage.getItem("products_details"));
        const cart_products = [];

        for (let i = 0; i < cart.length; i++) {
            const cartpro = pro_data.find(e => e.puid === cart[i].product_id);
            cart_products.push(cartpro);
        }

        let total =0;
        for (let i = 0; i < cart_products.length; i++) {
            // Create the <tr> element

            const trElement = document.createElement("tr");
            trElement.id = "carit";

            // Create the first <td> element
            const tdElement1 = document.createElement("td");
            tdElement1.className = "trex";

            // Create the <img> element
            const imgElement = document.createElement("img");
            imgElement.setAttribute("src", cart_products[i].image.main_img);
            imgElement.setAttribute("class", "cart_img");
            imgElement.setAttribute("data-id", cart_products[i].puid);
            imgElement.width = "150";
            imgElement.height = "130";

            // Append the <img> element to the first <td> element
            tdElement1.appendChild(imgElement);

            // Append the first <td> element to the <tr> element
            trElement.appendChild(tdElement1);

            // Create the second <td> element
            const tdElement2 = document.createElement("td");
            tdElement2.className = "trex";

            // Create the first <p> element
            const pElement1 = document.createElement("p");
            pElement1.textContent = cart_products[i].product_name;

            // Create the second <p> element

            // const pElement2 = document.createElement("p");
            // pElement2.textContent = cart_products[i].brand_name;

            // // Create the third <p> element
            // const pElement3 = document.createElement("p");
            // pElement3.textContent = "Size: L";

            // Append the <p> elements to the second <td> element
            tdElement2.appendChild(pElement1);
            // tdElement2.appendChild(pElement2);

            // tdElement2.appendChild(pElement3);

            // Append the second <td> element to the <tr> element
            trElement.appendChild(tdElement2);

            // Create the third <td> element
            const tdElement3 = document.createElement("td");
            tdElement3.className = "trex";

            // Create the <p> element with the price
            const pElement4 = document.createElement("p");
            pElement4.innerHTML = `₹${cart_products[i].price}`;

            // Append the <p> element to the third <td> element
            tdElement3.appendChild(pElement4);

            // Append the third <td> element to the <tr> element
            trElement.appendChild(tdElement3);

            // Create the fourth <td> element
            const tdElement4 = document.createElement("td");
            tdElement4.className = "trex";

            // Create the <input> element
            // const inputElement = document.createElement("input");
            // inputElement.className = "quan";
            // inputElement.type = "number";
            // inputElement.value = cart_products[i].product_qty;
            // inputElement.min = "1";
            // inputElement.max = "12";
            // inputElement.data = cart_products[i].puid;
            // Create the necessary elements
            // Create the <p> element with the total price
            const pElement = document.createElement("p");
            pElement.innerHTML = cart[i].p_qty;


            // const minusLink = document.createElement('a');
            // const minusSpan = document.createElement('span');
            // const input = document.createElement('input');
            // const plusLink = document.createElement('a');
            // const plusSpan = document.createElement('span');

            // // Set the necessary attributes and classes
            // div.setAttribute('id', 'sq');
            // minusLink.setAttribute('href', '');
            // minusLink.classList.add('quantity__minus');
            // minusSpan.textContent = '-';
            // minusSpan.setAttribute('id', 'minus-btn')
            // plusLink.setAttribute('href', '');
            // plusLink.classList.add('quantity__plus');
            // plusSpan.textContent = '+';
            // plusSpan.setAttribute('id' ,'plus-btn')
            // input.setAttribute('type', 'text');
            // input.readOnly = true;
            // input.classList.add('sqb');
            // input.setAttribute('value', '1');

            // Append the elements to build the DOM structure
            // minusLink.appendChild(minusSpan);
            // plusLink.appendChild(plusSpan);
            // div.appendChild(minusLink);
            // div.appendChild(input);
            // div.appendChild(plusLink);

            // // Append the div to an existing element on the page, or the body if none exists
            // const container = document.getElementById('container'); // Replace 'container' with the ID of the desired parent element
            // if (container) {
            //   container.appendChild(div);
            // } else {
            //   document.body.appendChild(div);
            // }

            // // Append the <input> element to the fourth <td> element
            tdElement4.appendChild(pElement);

            // Append the fourth <td> element to the <tr> element
            trElement.appendChild(tdElement4);

            // Create the fifth <td> element
            const tdElement5 = document.createElement("td");
            tdElement5.className = "trex";

            // Create the <p> element with the total price
            const pElement5 = document.createElement("p");
            pElement5.id = "pElement5"
            pElement5.innerHTML = "₹" + cart[i].p_qty * cart_products[i].price;

            // Append the <p> element to the fifth <td> element
            tdElement5.appendChild(pElement5);

            // Append the fifth <td> element to the <tr> element
            trElement.appendChild(tdElement5);

            // Create the sixth <td> element
            const tdElement6 = document.createElement("td");
            tdElement6.className = "trex";

            // Create the <i> element for the delete icon
            const iElement = document.createElement("i");
            iElement.className = "fa-solid fa-xmark fa-sm";
            iElement.id = "remove_icon";
            iElement.style.color = "#900c";
            tdElement6.appendChild(iElement);

            // Append the sixth <td> element to the <tr> element
            trElement.appendChild(tdElement6);

            total+= cart[i].p_qty*cart_products[i].price;

            document.querySelector(".product-table").append(trElement);
        }
        console.log(total)
// Create the parent div element with class "rightside"
const risdtosum = document.createElement('div');
risdtosum.className = 'rightside';

// Create the h4 element with text "ORDER SUMMARY"
const heading = document.createElement('h4');
heading.textContent = 'ORDER SUMMARY';
risdtosum.appendChild(heading);

// Create the table element with class "details"
const table = document.createElement('table');
table.className = 'details';
risdtosum.appendChild(table);

// Create the caption element
const caption = document.createElement('caption');
table.appendChild(caption);

// Create the th element
const tableHeader = document.createElement('th');
table.appendChild(tableHeader);

// Create the first row - Subtotal
const row1 = document.createElement('tr');
const subtotalLabel = document.createElement('td');
subtotalLabel.textContent = 'SUBTOTAL';
row1.appendChild(subtotalLabel);
const subtotalAmount = document.createElement('td');
subtotalAmount.className = 'rf';
subtotalAmount.id = 'subtotal1';
subtotalAmount.innerText = "₹" + total
row1.appendChild(subtotalAmount);
table.appendChild(row1);

// Create the second row - Shipping
const row2 = document.createElement('tr');
const shippingLabel = document.createElement('td');
shippingLabel.textContent = 'SHIPPING';
row2.appendChild(shippingLabel);
const shippingAmount = document.createElement('td');
shippingAmount.className = 'rf';
shippingAmount.textContent = 'Free';
row2.appendChild(shippingAmount);
table.appendChild(row2);

// Create the third row - Secure Pack
const row3 = document.createElement('tr');
const securePackLabel = document.createElement('td');
securePackLabel.textContent = 'SECURE PACK';
row3.appendChild(securePackLabel);
const securePackAmount = document.createElement('td');
securePackAmount.className = 'rf';
securePackAmount.innerHTML = '&#8377 17.00';
row3.appendChild(securePackAmount);
table.appendChild(row3);

// Create the fourth row - Discount
const row4 = document.createElement('tr');
const discountLabel = document.createElement('td');
discountLabel.textContent = 'DISCOUNT';
row4.appendChild(discountLabel);
const discountAmount = document.createElement('td');
discountAmount.className = 'rf';
discountAmount.innerHTML = '&#8377 -554.00';
row4.appendChild(discountAmount);
table.appendChild(row4);

// Create the fifth row - Order Total
const row5 = document.createElement('tr');
const orderTotalLabel = document.createElement('td');
orderTotalLabel.textContent = 'ORDER TOTAL';
row5.appendChild(orderTotalLabel);
const orderTotalAmount = document.createElement('td');
orderTotalAmount.className = 'rf';
orderTotalAmount.innerHTML = '&#8377 3,017.00';
row5.appendChild(orderTotalAmount);
table.appendChild(row5);

// Create the div element with id "inc" and text "Inclusive of all taxes"
const inclusiveDiv = document.createElement('div');
inclusiveDiv.id = 'inc';
inclusiveDiv.textContent = 'Inclusive of all taxes';
risdtosum.appendChild(inclusiveDiv);

// Create the button element with class "cbtn" and link to "./checkout.html"
const checkoutButton = document.createElement('button');
checkoutButton.className = 'cbtn';
const checkoutLink = document.createElement('a');
checkoutLink.href = './checkout.html';
checkoutLink.textContent = 'CHECKOUT';
checkoutButton.appendChild(checkoutLink);
risdtosum.appendChild(checkoutButton);

// Append the risdtosum to the document body or any desired container element
document.body.appendChild(risdtosum);
document.querySelector(".content").append(risdtosum);

        // delete function
        const cart_remove = document.querySelectorAll("#remove_icon");
        cart_remove.forEach((remove_item) => {
            remove_item.addEventListener("click", function del() {
                if (confirm("Are you Sure?")) {
                    const parent = this.parentNode.parentNode;
                    const id = parent.querySelector(".cart_img").getAttribute("data-id");

                    const tot_cartpro = JSON.parse(localStorage.getItem("cart_details"));
                    const find_products = tot_cartpro.find(e => e.product_id === id);
                    const find_index = tot_cartpro.indexOf(find_products);
                    tot_cartpro.splice(find_index, 1);
                    localStorage.setItem("cart_details", JSON.stringify(tot_cartpro));
                    window.location.reload();
                }
            });
        });
    </script>
</body>
<!-- <footer>
    <div class="cartfoot">
        <div class="cfl">
            <p>
                <a href="">Terms of Use</a>
            </p>
            <p>© 2022-present JAUNTY RIALTO.com</p>
            <p>All rights reserved.</p>
        </div>
        <div class="cfr">
            <img src="../../assets/images/footer/payment.png" alt="">
        </div>
    </div>
</footer> -->

</html>